import requests
import random
import time
import json

headers = {"Content-Type": "application/json"}
#v = [random.random() for _ in range(1024)]
v = [-0.016106296, 0.03151555, 0.004059343, -0.053422607, -0.036986638, 0.07429232, 0.010862985, 0.013760828, -0.013400633, 0.09152026, 0.020502957, -0.008111176, 0.038052782, 0.035980757, 0.017858755, 0.043281246, -0.013684065, -0.052158758, -0.02804523, 0.010681569, 0.023803212, 0.0055055013, -0.036536556, 0.00790307, 0.004018927, -0.0155052915, 0.0030800144, 0.013346831, 0.0063252607, 0.03766048, -0.04049576, 0.05059541, -0.012644918, 0.00067862263, 0.032273512, -0.061827943, -0.04006408, -0.073197275, -0.019184515, 0.013141355, 0.019808352, -0.039305877, -0.036746584, -0.030387616, -0.015835585, 0.009375833, 0.024479657, 0.07278544, -0.012530379, -0.005127135, 0.02261628, -0.017155465, 0.036725547, 0.014873842, -0.024194043, 0.017707296, 0.00482511, -0.017037516, 0.018555023, 0.014067066, 0.007676715, 0.011491807, 0.020850617, -0.008148809, -0.018586397, -0.04258194, -0.018504959, -0.053348035, -0.011608074, 0.0008800879, 0.06852104, 0.0011475536, 0.0134911295, -0.031142589, -0.039014652, 0.02796744, 0.002964146, -0.048361618, -0.017440736, 0.019556984, 0.012346431, 0.0031776035, -0.050591365, 0.0026677994, 0.046584338, -0.02980147, -0.017075196, -0.022104193, 0.032978334, -0.0079636825, 0.012209133, 0.004178801, 0.019596197, -0.00010485212, 0.017408472, 0.00876627, 0.033105582, 0.021635026, 0.049712308, -0.009467662, -0.0021388088, 0.0024338413, 0.054586522, 0.056516685, -0.0127051165, -0.0106767295, -0.05505924, 0.014073632, -0.034354374, 0.04166146, -0.03806185, -0.031670675, -0.020737063, 0.045167524, -0.041482184, 0.027860416, 0.04271308, -0.02061981, 0.014363828, 0.044667248, 0.011669566, 0.039683975, -0.0026172828, 0.006752189, 0.01514593, -0.03030678, 0.009860289, -0.018465545, -0.02031314, 0.038425297, 0.006579178, -0.019431889, -0.059553694, 0.033724938, -0.021210453, -0.010781945, -0.014084452, 0.040399313, 0.049823664, 0.008802343, 0.052536387, -0.037676215, -0.0050062737, 0.056048017, 0.030103661, 0.034248732, 0.025974367, 0.018863969, 0.012070052, -0.047680404, -0.004189562, 0.013390732, -0.0022733035, 0.03036076, 0.020583197, 0.018610587, 0.014843622, 0.023961172, -0.0010514064, -0.013293176, 0.030461261, 0.022312563, -0.00031777893, 0.060600437, -0.0032625156, 0.031826474, -0.036736812, 0.023103833, 0.048713263, -0.037555583, 0.044530813, 0.0028680507, 0.03706679, 0.015381833, 0.0038947917, 0.007342678, 0.034330454, -0.03307371, 0.002235742, 0.03846556, -0.0192191, 0.0019968343, 0.0010324989, 0.021828406, 0.003479424, 0.037669823, -0.090066664, 0.013098416, -0.02690122, 0.014760294, 0.002171673, -0.0022673614, 0.002797185, -0.0056274636, -0.039739374, -0.00328418, 0.042336106, -0.0133003695, -0.015788678, 0.00677009, -0.024254493, -0.00332034, 0.042539425, -0.037708044, 0.046563424, -0.012243148, 0.0016859698, 0.015505606, 0.03136216, 0.020788917, -0.065384634, 0.041825403, -0.01920396, 0.057955753, 0.005121622, 0.006873122, 0.062909, 0.07504214, -0.012900459, 0.041215695, 0.022535997, 0.015818886, -0.0026408902, 0.028432813, 0.0040194057, 0.00093019597, -0.00018473102, 0.011098133, -0.024250919, 0.009420452, -0.0031653629, 0.028986752, -0.033430588, 0.041856803, -0.03519462, -0.0143836485, -0.04345, 0.01601135, -0.056033514, 0.035799608, -0.0066760858, -0.038775515, -0.016313555, -0.035895593, 0.0048920256, 0.012234058, -0.046152078, 0.082192175, -0.04349807, -0.053713117, -0.020885307, 0.01694424, 0.018275512, 0.05029026, 0.020296874, -0.0071518584, -0.018290924, -0.00018012886, -0.044066813, -0.018494418, 0.0261668, 0.059245463, 0.024126125, 0.027483663, -0.04072567, -0.025165007, 0.031128423, 0.055731006, 0.049876753, -0.036815066, -0.0018198641, -0.0031339289, 0.024756975, -0.020092105, 0.00010863937, 0.036403116, 0.0041691754, 0.030042624, 0.015208683, -0.01814036, 0.016751051, 0.005347628, -0.046203237, -0.0031966958, 0.028130176, -0.012834023, 0.012551358, 0.07234807, -0.005828717, 0.016990151, -0.019891465, 0.011757781, -0.011737798, -0.040344276, -0.017187012, 0.07977924, 0.0055755293, -0.028176002, -0.035106033, -0.021198552, 0.0008048388, -0.062475882, 0.014597878, 0.007983725, -0.07961233, 0.021238428, 0.00633396, 0.0046447422, -0.025453, -0.016109996, 0.07763627, -0.078148134, -0.012800434, -0.04451117, -0.012947328, -0.02194604, 0.017708711, -0.017694375, 0.024912214, -0.030314948, 0.029005622, 0.017362203, 0.030593414, -0.009488912, 0.066770285, -0.013184776, 0.006447252, 7.99188e-06, -0.033898186, -0.0011457748, -0.02212429, 0.026552798, -0.012938377, 0.055348698, -0.019733489, 0.018938748, -0.0003796989, 0.005034886, 0.0051478157, 0.004298319, -0.0381962, 0.019047482, 0.019451551, 0.014825683, -0.0016139492, 0.0023218158, 0.05374272, -0.06697693, -0.018806836, -0.012459677, -0.011713351, 0.06586287, 0.0037400827, -0.04592521, 0.007660491, 0.010258522, 0.022415211, -0.018755332, -0.014369033, -0.008186652, 0.0150799025, -0.04026427, 0.0007250896, 0.022185579, 0.02874955, 0.0405408, -0.011197792, -0.007485784, 0.018104168, -0.061748862, 0.01131646, 0.027366044, -0.06168452, -0.034627557, 0.0056095934, 0.042186003, -0.0014354036, 0.015113108, -0.026061784, 0.02804723, 0.058767986, -0.038199075, 0.0051244, -0.03104068, 0.018820344, -0.03884223, 0.045618214, -0.028131396, -0.019174622, 0.02458052, -0.0050491593, 0.0046103476, -0.026339712, 0.017296, -0.0915168, -0.05396127, -0.021952847, -0.012664128, -0.028629024, 0.06211977, 0.014919356, -0.013614381, 0.0033138106, -0.032342296, -0.0063949106, 0.01214836, -0.038355894, -0.048751805, -0.0042111436, -0.062914275, 0.014941833, -0.006905247, 0.01108891, -0.030426357, 0.017008746, -0.02224076, -0.034463413, -0.015913216, -0.010285405, -0.04824809, -0.0036372666, -0.038216166, -0.052199304, 0.060441546, 0.01747178, 0.04962207, 0.022710081, 0.009103933, 0.04014199, -0.03938105, -0.049901593, 0.010807537, 0.001031817, 0.006975478, 0.0063514886, -0.05048936, -0.01574057, -0.011546397, -0.058735803, 0.016265374, -0.05961879, 0.0009547922, -0.0008446232, 0.02560459, 0.0038730807, -0.013131891, -0.02337347, -0.014697083, -0.017439231, -0.006973806, 0.013130942, 0.012067538, -0.00843002, 0.0127121955, 0.027477575, 0.03303083, -0.0026773587, -0.03544223, -0.004344274, -0.0010334179, -0.0062591285, 0.026918514, 0.06564691, -0.023615526, -0.005887873, -0.020254077, -0.026440436, -0.054724943, 0.0138871, 0.07539409, -0.003939479, 0.00068763475, 0.0036850108, -0.018165356, 0.051752504, 0.014642998, 0.029361375, 0.019804977, 0.023887645, -0.015947191, 0.0057152235, 0.041559145, -0.014067711, 0.03360165, -0.061472967, 0.0025889636, -0.03609233, -0.03808592, 0.024094861, 0.0032709867, -0.010623902, 0.031519793, 0.02319734, 0.019652985, 0.010694867, -0.03281643, -0.028619712, 0.028470842, 0.03949077, -0.045815866, 0.01677459, 0.03258341, 0.0032859147, 0.023081178, 0.015758075, 0.006271319, -0.015194717, -0.086025015, -0.055813566, -0.018956814, -0.025092691, -0.028449642, 0.021490179, -0.022435993, -0.013152583, 0.014676477, -0.0045889234, -0.0066444986, -0.021792596, 0.032899875, -0.048744146, 0.04154991, 0.022605978, -0.04077197, 0.01109323, 0.016110254, 0.025389291, -0.02237523, -0.018662123, -0.0066662463, 0.0402865, -0.007630137, -0.058021802, 0.014798462, 0.0121355755, 0.0056473454, -0.0071312836, 0.06237248, 0.0020210354, 0.031337094, 0.02169198, -0.03047395, -0.021823337, -0.026954623, -0.0046848143, 0.02714487, -0.016552614, 0.022992002, 0.05219412, -0.042776324, -0.015777398, 0.045923807, 0.0075716665, -0.030977646, 0.0028203926, 0.021583218, -0.038011804, -0.0024870208, 0.026504874, 0.058095496, 0.019870408, 0.024939403, -0.022580067, -0.022750275, -0.03476117, -0.026906583, -0.0040784166, 0.042824794, 0.014055406, -0.042525563, 0.04137676, 0.018313466, -0.03167714, 0.02175381, -0.0037716457, -0.005027863, -0.024585864, 0.0052492255, 0.007306238, 0.019215077, 0.047236495, -0.012483189, -0.0105037065, 0.016070679, -0.010101607, 0.022133201, -0.019066766, -0.042602822, -0.003201111, -5.394103e-05, 0.0036156292, -0.029083218, 0.019109607, -0.0056904866, -0.04458283, -0.020327521, 0.028922876, 0.011381525, -0.02430806, 0.028946875, 0.053830262, 0.0071152467, -0.01037238, 0.008510381, 0.003808773, -0.02647469, -0.0068815635, -0.010306756, -0.02259478, 0.03388585, -0.0031266238, -0.0049963803, 0.04236269, -0.026592268, -0.05913215, -0.0042078067, 0.009609159, -0.04433745, 0.012262379, -0.014332994, -0.015983775, -0.04126709, -0.014979271, -0.03078515, 0.012566236, -0.021924688, -0.028035056, -0.0051994943, 0.006713199, -0.042349305, -0.02492775, -0.031502057, -0.024037082, 0.023840198, -0.008813533, 0.052425917, 0.024785297, -0.020318013, 0.017645285, 0.026792763, 0.04097239, 0.02565157, -0.00045520804, 0.00054938585, -0.008585688, 0.010726739, -0.021691792, -0.010265113, -0.012545775, 0.046518374, -0.06238118, 0.05250176, -0.0319018, 0.0069150603, -0.043804668, 0.0501873, 0.02153567, 0.027052486, -0.027241345, 0.013725062, -0.031301685, -0.032402594, -0.015549352, 0.06503288, 0.04457948, 0.020775238, 0.09150552, 0.05646132, -0.0017919064, 0.014827234, 0.04133351, -0.00038131082, 0.02996348, 0.013430528, 0.0101074325, 0.09250771, 0.013157887, -0.028824842, -0.015449176, -0.040061664, 0.03503413, 0.024517493, 0.0033878866, 0.0053523015, 0.0124116605, 0.0017093819, -0.001639703, 0.002619829, -0.017622622, -0.039190006, 0.022667011, 0.021509025, -0.014339828, 0.010015526, -0.011469084, -0.007901625, -0.045481093, -0.0074474867, -0.0049973126, -0.024923515, 0.029733328, 0.010187228, -0.011526515, 0.09217039, -0.0032746857, 0.017064681, 0.0011434533, 0.013346491, 0.010550733, -0.01198093, -0.0016228604, 0.030184152, 0.029151408, -0.05450404, -0.013658469, 0.013614304, -0.0022908836, -0.07647734, -0.05365794, 0.067492805, -0.026879346, 0.060806055, -0.04682438, 0.014266631, 0.010328995, -0.00035193175, -0.02789081, -0.040809534, 0.012803349, 0.010351113, -0.034404974, 0.024705395, 0.045607075, 0.003236371, 0.039283555, -0.031769004, -0.027778307, 0.025290517, -0.06329916, 0.028459763, 0.008107476, -0.06551072, 0.025430491, 0.016292801, -0.03016103, 0.00484484, -0.0257254, -0.04328006, 0.0055815326, 0.024082964, 0.018250322, -0.03288984, 0.048053067, 0.00031608358, 0.015426855, 0.011135784, 0.0013452613, -0.027864851, 0.01371151, 0.030391797, 0.014525403, -0.026835857, 0.049440295, 0.039261963, 0.001465802, -0.02686289, -0.009335074, -0.00777836, 0.020862568, 0.0043779807, -0.05095265, -0.03109569, -0.018660687, 0.0030063516, -0.0005986494, -0.011928643, -0.07127738, 0.010451063, -0.026208501, -0.015502765, 0.0336319, -0.055715505, -0.06424004, -0.01633175, 0.013849675, -0.004336131, -0.017961755, -0.047394335, 0.0065089683, 0.030221885, -0.0026962128, 0.006298276, 0.013425727, -0.021666193, 0.040617336, -0.0534656, -0.012944942, -0.031744, -0.09134556, -0.043540303, 0.007276887, 0.02643384, -0.030347275, 0.022774812, 0.02725479, 0.02620295, -0.025283597, 0.006375865, -0.028216941, -0.0063067386, -0.007679105, -0.040629834, 0.008452205, 0.012825, 0.0061210333, 0.013941995, 0.030796034, -0.011301803, 0.02569254, 0.0013123873, -0.05136349, 0.041216053, 0.0103212, 0.09494334, 0.03599697, -0.037591897, 0.07683225, 0.008568725, -0.003038648, -0.007044746, -0.0068625947, 0.002570266, 0.050966784, -0.04474839, 0.04606104, 0.027374811, -0.01831464, -0.028502459, 0.012594281, 0.011263296, 0.028790805, 0.035013955, 0.023337806, 0.045327805, -0.0040546264, 0.01641843, -0.024051877, -0.012316752, 0.025249768, -0.024675248, 0.03170933, 0.017810874, -0.010044514, -0.028133608, -0.082520954, 0.02195696, 0.05865519, -0.03839373, -0.042089548, 0.051740404, -0.023486774, 0.0056874896, 0.015448375, -0.010057039, -0.012928426, -0.033926863, -0.045750387, -0.012751878, 0.062063422, -0.019181741, -0.053629164, -0.018630963, -0.059299737, 0.019109342, 0.047323454, 0.014053644, -0.015150006, 0.008728481, -0.006813309, 0.026015421, 0.045843884, 0.02616062, -0.001050998, -0.03955441, 3.1659205e-05, -0.03420639, 0.058701556, -0.02675345, -0.03733778, -0.026699647, 0.002851918, 0.04648161, -0.009763713, 0.00830698, -0.026390536, 0.048736025, -0.019227708, -0.019940957, -0.043867968, -0.111262046, 0.052227665, -0.053908274, 0.000761981, -0.020649089, -0.013789689, -0.002711342, 0.013510449, 0.014044636, -0.039900042, -0.016242748, 0.0031406495, 0.01730142, 0.016538316, -0.011259773, 0.09549928, -0.052616052, 0.05190114, -0.017696157, -0.0033415977, 0.0062796576, -0.024319425, -0.000976902, 0.062009387, -0.021380872, 0.038013604, -0.03581772, -0.029137993, 0.01320525, -0.015241794, 0.060482614, -0.020887353, 0.011678098, -0.026427371, -0.0012943142, -0.008620483, -0.048769116, -0.03284783, -0.02290555, 0.005005491, 0.043377142, 0.0027636474, -0.06156397, 0.061816666, 0.0044157025, -0.012406838, -0.03568901, 0.009222516, 0.025260268, 0.03154508, 0.016075032, 0.055428, -0.010545384, -0.02236205, -0.0032980524, 0.015662521, -0.009370298, -0.026362903, -0.031984262, -0.021193415, 0.008418725, -0.018242666, -0.03365486, -0.036681555, 0.064485356, -0.0076929973, -0.014261129, 0.039003253, 0.009485895, 0.056584768, 0.0037125186, -0.0013055056, -0.0015492045, -0.015399631, 0.027956832, -0.02267609, -0.023929408, 0.014169703, -0.059864175, -0.0074542644, -0.0077505563, -0.011714201, -0.009668453, 0.014869481, 0.0050766487, 0.00017473512, -0.019531759, 0.010718136, 0.010625117, 0.028238384, -0.01962822, 0.014140863, -0.04334588, -0.017896054, -0.03721526, 0.05941467, -0.060141664, 0.034377053, 0.029492471, 0.009915216, -0.0012896087, 0.030659152, 0.039543346, 0.0052697076, 0.004953089, -0.020215059, 0.018208507, -0.0123152295, 0.021117033, -0.027022421, -0.035208277, 0.019152658, 0.036919046, 0.0085081, -0.017436879, 0.015572858, -0.033053827, 0.057086587, 0.027223524, 0.0031920888, -0.040820897, -0.0285304, -0.011857313, -0.043677177, -0.026101012]


import time
s = "wann wird die Zentralisierung des IKT abgeschlossen sein?"
pload = {"question": [s]}
#pload = {"sentences": ["this is a test sentence", "nackte vagines, drogen und schnaps"]}
#r = requests.post("http://localhost:5001/sentences2embeddings", json=pload, headers=headers)
response = requests.post('http://localhost:5000/question_answering', json=pload, headers=headers, stream=True)

if response.status_code == 200:
    for line in response.iter_lines():
        if line:
            print("omegalul")
            print(line.decode('utf-8'))
else:
    print('Error:', response.status_code)

#print(r.text)
exit()
num_vectors = 50
dim = 1024
entities = [
    #[i for i in range(num_vectors)], #field for pk -> seems to be the id
    [[random.random() for _ in range(1024)] for _ in range(num_vectors)]
]
sentences = ["this is a test sentence", "go ninjas go ninjas go ninjas go"]
pload = {'sentences': sentences}
#insert vectors
r = requests.post('http://localhost:5000/process_sentences', json=pload, headers=headers)
#print(r.text)


#time.sleep(1)
#search vectors
pload = {"vectors": [v]}
#print(pload)
r = requests.post('http://localhost:5000/search', json=pload, headers=headers)
#x = json.loads(f"{r.text}")
x = json.loads(r.text.replace("'", '"'))
print(x[0]["sentences"])


r = requests.get('http://localhost:5000/collection_details', headers=headers)
print(r.text)
